<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns="" class="no-js" lang="zxx" xmlns:layout="http://www.w3.org/1999/xhtml">

<!-- include/layout.html-->
<th:block th:replace="~{/include/layout :: setContent( ~{:: #wrap}  ) }">
    <section id="wrap">
    </section>
</th:block>

<div class="mobile-menu-overlay"></div>

<div class="main-container">
    <div class="pd-ltr-20 xs-pd-20-10">
        <div class="min-height-150px">
            <div class="page-header">
                <div class="row">
                    <div class="col-md-6 col-sm-12">
                        <div class="title">
                            <h4>퇴직증명서</h4>
                        </div>
                        <nav aria-label="breadcrumb" role="navigation">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item">
                                    <a href="index.html">퇴직증명서 발급</a>
                                </li>
                                <li class="breadcrumb-item active" aria-current="page">
                                    정보입력
                                </li>
                            </ol>
                        </nav>
                    </div>
                    <div class="col-md-6 col-sm-12 text-right">

                    </div>
                </div>
            </div>
        </div>


        <!-- Forms Start -->
        <div class="pd-20 card-box mb-30">
            <div class="clearfix">
                <div class="pull-left">
                    <h4 class="text-blue h4">필수입력 정보</h4>
                    <p class="mb-30">정보를 확인해주세요</p>
                </div>

            </div>
            <form th:if="${emp != null}" th:action="@{/certification/handleEmpCertInfo}" method="post">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

                <div class="form-group">
                    <label for="certSort">증명서 종류</label>
                    <input
                            class="form-control"
                            type="text"
                            id="certSortDisplay"
                            name="certSortDisplay"
                            value="퇴직증명서"
                            readonly
                    />
                    <input
                            class="form-control"
                            type="hidden"
                            id="certSort"
                            name="certSort"
                            value="A03"
                    />
                </div>

                <div class="form-group">
                    <input
                            class="form-control"
                            type="hidden"
                            id="empId"
                            name="empId"
                            th:field="${emp.empId}"/>
                </div>

                <div class="form-group">
                    <label for="empName">이름</label>
                    <input
                            class="form-control"
                            type="text"
                            id="empName"
                            name="empName"
                            th:field="${emp.empName}"
                            readonly
                    />
                </div>

                <div class="form-group">
                    <label for="empBirth">생년월일</label>
                    <input
                            class="form-control"
                            type="text"
                            id="empBirth"
                            name="empBirth"
                            th:field="${emp.empBirth}"
                            readonly
                    />
                </div>

                <div class="form-group">
                    <label for="empAddr">주소</label>
                    <input
                            class="form-control"
                            type="text"
                            id="empAddr"
                            name="empAddr"
                            th:field="${emp.empAddr}"
                            readonly
                    />
                </div>

                <div class="form-group">
                    <label for="empGrade">최종 직위</label>
                    <input
                            class="form-control"
                            type="text"
                            id="empGrade"
                            name="empGrade"
                            th:field="${emp.empGrade}"

                            readonly
                    />
                </div>

                <div class="form-group">
                    <label for="empDept">최종 근무 부서</label>
                    <input
                            class="form-control"
                            type="text"
                            id="empDept"
                            name="empDept"
                            th:field="${emp.empDept}"

                            readonly
                    />
                </div>

                <div class="form-group">
                    <input
                            class="form-control"
                            type="hidden"
                            id="empStatus"
                            name="empStatus"
                            th:field="${emp.empStatus}"/>
                </div>

                <div class="form-group">
                    <label for="empFirstDt">입사일자</label>
                    <input
                            class="form-control"
                            type="text"
                            id="empFirstDt"
                            name="empFirstDt"
                            th:field="${emp.empFirstDt}"

                            readonly
                    />
                </div>

                <div class="form-group">
                    <label for="empLastDt">퇴사일자</label>
                    <input
                            class="form-control"
                            type="text"
                            id="empLastDt"
                            placeholder="2023-05-31"
                            readonly
                    />
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="col-md-6 col-sm-12">
                            <label class="weight-600">사용 용도</label>
                            <div class="custom-control custom-checkbox mb-5">
                                <input
                                        type="checkbox"
                                        class="custom-control-input"
                                        name="useOfCert"
                                        id="financialUse"
                                        value="금융기관"
                                        onclick="NoMultiChk(this)"
                                />
                                <label class="custom-control-label" for="financialUse"
                                >금융기관 제출</label
                                >
                            </div>
                            <div class="custom-control custom-checkbox mb-5">
                                <input
                                        type="checkbox"
                                        class="custom-control-input"
                                        name="useOfCert"
                                        id="govOfUse"
                                        value="관공서"
                                        onclick="NoMultiChk(this)"
                                />
                                <label class="custom-control-label" for="govOfUse"
                                >관공서 제출</label
                                >
                            </div>
                            <div class="custom-control custom-checkbox mb-5">
                                <input
                                        type="checkbox"
                                        class="custom-control-input"
                                        name="useOfCert"
                                        id="enterpriseUse"
                                        value="기업"
                                        onclick="NoMultiChk(this)"
                                />
                                <label class="custom-control-label" for="enterpriseUse"
                                >기업 제출</label
                                >
                            </div>
                            <div class="custom-control custom-checkbox mb-5">
                                <input
                                        type="checkbox"
                                        class="custom-control-input"
                                        name="useOfCert"
                                        id="etcUse"
                                        value="기타"
                                        onclick="NoMultiChk(this)"
                                />
                                <label class="custom-control-label" for="etcUse"
                                >기타</label
                                >
                            </div>

                            <div class="col-md-6 col-sm-12">
                                <input
                                        type="hidden"
                                        id="selectedUseOfCert"
                                        name="selectedUseOfCert"
                                        value=""
                                />
                            </div>
                            <div class="col-md-6 col-sm-12">
                            </div>
                        </div>
                    </div>


                    <div class="col text-center">


                        <button type="submit" class="btn btn-primary btm-lg" onclick="validateAndSubmit2()"
                        >작성 완료
                        </button>

                    </div>
                </div>
            </form>
            <!-- emp객체 데이터 잘 넘어오나 확인 코드 -->
            <div th:unless="${emp != null}">
                <span> 데이터가 없습니다.</span>
            </div>
        </div>
    </div>
</div>
<!-- horizontal Basic Forms End -->


</div>
<th:block th:replace="~{/include/footer :: setContent( ~{:: #footer}  ) }">
    <section id="footer">
    </section>
</th:block>
</div>
</div>

<!-- js -->

<script>
    function NoMultiChk(chk) {
        var obj = document.getElementsByName("useOfCert");
        var selectedValue = "";
        for (var i = 0; i < obj.length; i++) {
            if (obj[i] != chk) {
                obj[i].checked = false;
            } else if (obj[i].checked) {
                selectedValue = obj[i].value;
            }
        }
        document.getElementById("selectedUseOfCert").value = selectedValue;
    }


    function validateAndSubmit2() {
        //체크된 체크박스 개수
        var checkedCount = document.querySelectorAll('input[type="checkbox"]:checked').length;

        // 체크박스가 하나 이상인지 확인
        if (checkedCount < 1) {
            // 체크박스가 하나 이상이어야 한다는 경고창 표시
            swal("경고", "사용용도를 선택해주세요", "warning")
        } else {
            swal(
                {
                    title: '발급 완료!',
                    html: '발급이 완료되었습니다 <br> 나의 증명서 발급내역에서 확인가능합니다',
                    type: 'success',
                    confirmButtonClass: 'btn btn-success',
                    confirmButtonText: '내 증명서 발급내역'
                }).then(value => {
                if (value) {
                    location.href = 'my-cert-list'
                }
            })
        }
    }

</script>
<script src="../src/plugins/sweetalert2/sweetalert2.all.js"></script>
<script src="../src/plugins/sweetalert2/sweet-alert.init.js"></script>
<script src="vendors/scripts/core.js"></script>
<script src="vendors/scripts/script.min.js"></script>
<script src="vendors/scripts/process.js"></script>
<script src="vendors/scripts/layout-settings.js"></script>
<!-- Google Tag Manager (noscript) -->
<noscript
>
    <iframe
            src="https://www.googletagmanager.com/ns.html?id=GTM-NXZMQSS"
            height="0"
            width="0"
            style="display: none; visibility: hidden"
    ></iframe
    >
</noscript>
<!-- End Google Tag Manager (noscript) -->
</body>
</html>

